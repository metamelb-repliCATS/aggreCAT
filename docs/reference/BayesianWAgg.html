<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Aggregation Method: BayesianWAgg — BayesianWAgg • aggreCAT</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Aggregation Method: BayesianWAgg — BayesianWAgg"><meta property="og:description" content="Bayesian aggregation methods with either uninformative or informative prior distributions.
JAGS Install
For instructions on installing JAGS onto your system visit https://gist.github.com/dennisprangle/e26923fae7477566510757ab3341f54c"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">aggreCAT</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9004</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aggregation Method: BayesianWAgg</h1>
    
    <div class="hidden name"><code>BayesianWAgg.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Bayesian aggregation methods with either uninformative or informative prior distributions.</p>
<p><strong>JAGS Install</strong></p>
<p>For instructions on installing JAGS onto your system visit <a href="https://gist.github.com/dennisprangle/e26923fae7477566510757ab3341f54c" class="external-link">https://gist.github.com/dennisprangle/e26923fae7477566510757ab3341f54c</a></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">BayesianWAgg</span><span class="op">(</span></span>
<span>  <span class="va">expert_judgements</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"BayTriVar"</span>,</span>
<span>  priors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  placeholder <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  percent_toggle <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>expert_judgements</dt>
<dd><p>A dataframe in the format of <a href="data_ratings.html">data_ratings</a>.</p></dd>


<dt>type</dt>
<dd><p>One of <code>"BayTriVar"</code>, or <code>"BayPRIORsAgg"</code>.</p></dd>


<dt>priors</dt>
<dd><p>(Optional) A dataframe of priors in the format of <a href="data_supp_priors.html">data_supp_priors</a>, required for <code>type</code> <code>BayPRIORsAgg</code>.</p></dd>


<dt>name</dt>
<dd><p>Name for aggregation method. Defaults to <code>type</code> unless specified.</p></dd>


<dt>placeholder</dt>
<dd><p>Toggle the output of the aggregation method to impute placeholder data.</p></dd>


<dt>percent_toggle</dt>
<dd><p>Change the values to probabilities. Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A tibble of confidence scores <code>cs</code> for each <code>paper_id</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>type</code> may be one of the following:</p>
<p><strong>BayTriVar</strong>: The Bayesian Triple-Variability Method, fit with JAGS.</p>
<p><script id="MathJax-script" async src="../../mathjaxr/doc/mathjax/es5/tex-chtml-full.js"></script>

Three kinds of variability around best estimates are considered:</p><ol><li><p>generic claim variability: variation across individuals within a claim</p></li>
<li><p>generic participant variability: variation within an individual across claims</p></li>
<li><p>claim - participant specific uncertainty (operationalised by bounds): informed
by interval widths given by individual \(i\) for claim \(c\).</p></li>
</ol><p>The model takes the log odds transformed individual best estimates as input (data),
uses a normal likelihood function and derives a posterior distribution for the
probability of replication.</p>
<p>\[log( \frac{B_{i,c}}{1-B_{i,c}}) \sim N(\mu_c, \sigma_{i,c}),\]</p>
<p>where \(\mu_c\) denotes the mean estimated probability of replication for claim
\(c\), and  \(\sigma_{i,c}\) denotes the standard deviation of the
estimated probability of replication for claim \(c\) and individual
\(i\) (on the logit scale).  Parameter \(\sigma_{i,c}\) is calculated as:
\[\sigma_{i,c} = (U_{i,c} - L_{i,c} + 0.01) \times \sqrt{\sigma_i^2+\sigma_c^2}\]
with \(\sigma_i\) denoting the standard deviation of estimated probabilities of
replication for individual \(i\) and  \(\sigma_c\) denoting the standard
deviation of the estimated probability of replication for claim \(c\).</p>
<p>The uninformative priors for specifying this Bayesian model are
\(\mu_c \sim N(0,\ 3)\), \(\sigma_i \sim U(0,\ 10)\) and
\(\sigma_c \sim U(0,\ 10)\). After obtaining the median of the posterior
distribution of \(\mu_c\), we can back transform to obtain
\(\hat{p}_c\):</p>
<p>\[\hat{p}_c\left( BayTriVar \right) = \frac{e^{\mu_c}}{1+e^{\mu_c}}\]</p>
<p><strong>BayPRIORsAgg</strong>: Priors derived from predictive models, updated with best estimates.</p>
<p>This method uses Bayesian updating to update a prior probability of
replication estimated from a predictive model with an aggregate of the individuals’ best
estimates for any given claim. Methodology is the same as <code>type</code> <code>"BayTriVar"</code> except an
informative prior is used for \(\mu_c\). Conceptually the parameters of the prior
distribution of \(\mu_c\) are informed by the PRIORS model (Gould et al. 2021)
which is a multilevel logistic regression model that predicts the probability of
replication using attributes of the original study. However, any model providing predictions of
the probability of replication can be used to generate the required priors.</p>
    </div>
    <div id="warning">
    <h2>Warning</h2>
    <p>Both <code>BayTriVar</code> and <code>BayPRIORsAgg</code> methods require a minimum of two claims for which judgements are supplied to <code>expert_judgements</code>. This is due to the mathematical definition of these aggregators: <code>BayesianWAgg</code> calculates the variance in best estimates across multiple claims as well as the variance in best estimates across claims per individual. Thus when only one claim is provided in <code>expert_judgements</code>, the variance is 0, hence more than one claim is required for the successful execution of both Bayesian methods.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="fu">BayesianWAgg</span><span class="op">(</span><span class="va">data_ratings</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Aaron Willcox, Charles T. Gray, Elliot Gould, David Wilkinson, Anca Hanea, Bonnie Wintle, Rose E. O’Dea.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

